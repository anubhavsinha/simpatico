<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Simpatico: 2.7 Data Analysis</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simpatico
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">Simpatico - Simulation Package for Polymer and Molecular Liquids</a>      </li>
      <li class="navelem"><a class="el" href="user_page.html">2 User Guide</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">2.7 Data Analysis </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>All of the Simpatico programs allow a user to evaluate and analyze a variety of physical properties during a simulation, "on the fly". The mcSim and mdSim programs (but not ddSim) can also be used to postprocess of a sequence of system configurations that were saved to file during an earlier simulation.</p>
<p>The classes that are used for data analysis in mcSim and mdSim are subclasses of the <a class="el" href="classMcMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">McMd::Diagnostic</a> base class. The classes used for data analysis in ddSim are subclasses of <a class="el" href="classDdMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">DdMd::Diagnostic</a>. A typical diagnostic class, in either namespace, evaluates one or more physical properties of interest, and either outputs a sequence of values to an associated file for later analysis or updates one or more statistical accumulators in order to accumulate, e.g., averages, autocorrelation functions, histograms etc. Source code for the diagnostic classes that are distributed with Simpatico can be found in the src/mcMd/diagnostics and src/ddMd/diagnostic directories. Users may create new diagnostic classes.</p>
<h2><a class="anchor" id="analysis_onthefly_section"></a>
On-the-fly Analysis</h2>
<p>The choice of which diagnostic operations (if any) should be executed during any Simpatico simulation is specified by the <a class="el" href="classMcMd_1_1DiagnosticManager.html" title="Manager for a list of Diagnostic objects.">DiagnosticManager</a> block of the parameter file. In each type of simulation, the <a class="el" href="classMcMd_1_1DiagnosticManager.html" title="Manager for a list of Diagnostic objects.">DiagnosticManager</a> object maintains an array of pointers to <a class="el" href="classMcMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">McMd::Diagnostic</a> objects (for mcSim or mdSim simulations) or <a class="el" href="classDdMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">DdMd::Diagnostic</a> objects (for ddSim). The <a class="el" href="classMcMd_1_1DiagnosticManager.html" title="Manager for a list of Diagnostic objects.">DiagnosticManager</a> block of the parameter file contains a list of polymorphic subbblocks, each of which contains the parameter file format for a diagnostic that should be applied during the simulation. Any number of diagnostics may be added to a simulation in this way.</p>
<p>Each subclass of either <a class="el" href="classMcMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">McMd::Diagnostic</a> or <a class="el" href="classDdMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">DdMd::Diagnostic</a> must re-implement a pure virtual method named sample(), which is invoked periodically during a simulation. The sample() method generally evaluates a physical property, and may either write data to an associated file or update a statistical accumulator, or both. The sample() method of each diagnostic is called only when the step counter is an integer multiple of the number of an integer "interval" parameter. The step counter and interval represents count MD time steps or attempted MC Markov moves during a simulation, or the number of configurations read from file in an mcSim or mdSim postprocessing run. Implementation of each subclass of <a class="el" href="classDdMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">DdMd::Diagnostic</a> generally involves some MPI communication in order to gather data onto the root processor for output or statistical analysis.</p>
<p>The parameter file block associated with each subclass of <a class="el" href="classMcMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">McMd::Diagnostic</a> thus contains an interval parameter, which specifies the frequency with which the "sample()" method should be called. The interval parameter may be different for different diagnostics, but the interval for each diagnostic must be a multiple of a "baseInterval" parameter that is specified as the first line within the <a class="el" href="classMcMd_1_1DiagnosticManager.html" title="Manager for a list of Diagnostic objects.">DiagnosticManager</a> block of the parameter file, before any of the subblocks. Most diagnostics also write data to an associated output file, either during the simulation or as a summery at the end of a simulation, and thus require an output file name as a parameter.</p>
<h2><a class="anchor" id="analysis_configWrite_section"></a>
Dumping Configurations to File</h2>
<p><a class="el" href="classMcMd_1_1DumpConfig.html" title="Periodically dump system configuration to a new file.">McMd::DumpConfig</a> (for mcSim and mdSim simulations) and <a class="el" href="classDdMd_1_1WriteConfig.html" title="Periodically dump simulation configuration to a new file.">DdMd::WriteConfig</a> (for ddMd simulations) are diagnostic classes that write system configurations to file at regular intervals, for later post-processing. These classes write each configuration to a separate file. The name of each file is constructed by concatenating the outputPrefix, a base name that is specified in the parameter file block for the <a class="el" href="classMcMd_1_1DumpConfig.html" title="Periodically dump system configuration to a new file.">DumpConfig</a> or WriteConfig class, and a sequential integer counter that is incremented by 1 after each file is written. Each configuration file contains (at a minimum) the atomic coordinates and the dimensions of the periodic simulation cell at a given instant. Any of several configuration file output formats may be chosen by placing a SET_CONFIG_IO command in the command file before the SIMULATE command.</p>
<p>The McMd::DumpTrajectory diagnostic can also be used in an mdSim program to write a sequence of configurations to a single MD "trajectory" file.</p>
<h2><a class="anchor" id="analysis_postprocess_section"></a>
Postprocessing</h2>
<p>To postprocess a sequence of configuration dump files, one must run mcSim or mdSim program using a parameter file very similar to that used for a simulation, and using a command script that contains an "ANALYZE_DUMPS" command in place of a "SIMULATE" command. The ANALYZE_DUMPS command causes the program to read in a sequence of configuration files and treat each configuration exactly as if they were generated during a simulation. The set of diagnostics that will be applied to a sequence of configurations during postprocessing is specified in the "DiagnosticManager" block of the parameter file, as for diagnostics that are applied on-the-fly during a simulation. The same set of diagnostic subclasses are available for use in either mode.</p>
<p>The names of the input configuration files are constructed by concatenating the inputPrefix parameter of the FileMaster, a base name that is specified as an argument to the ANALYZE_DUMPS command and an integer in a range that is specified in the ANALYZE command. For example, if the inputPrefix of the FileMaster was set to out/ (because this was the output prefix used by a previous simulation), and the outputPrefix was set to analyze/, the command </p>
<div class="fragment"><pre class="fragment">   ANALYZE_DUMPS  0   19   dump/config
</pre></div><p> would cause the main <a class="el" href="classMcMd_1_1McSimulation.html" title="A Monte-Carlo simulation of one McSystem.">McSimulation</a> or <a class="el" href="classMcMd_1_1MdSimulation.html" title="A molecular dynamics simulation of a single MdSystem.">MdSimulation</a> object to read in and apply all of the specified diagnostics to configurations files with names out/dump/config.0 out/dump/config.1 ... in/dump/config.19, and write the results of the analysis to files in the analyze/ directory.</p>
<p>The mdSim program may also be used postprocess an MD trajectory file. An MD trajectory file is a binary file that contains a sequence of configurations ("frames") within a single file. To analyze an MD trajectory file, simply use an ANALYZE_TRAJECTORY command rather than ANALYZE_DUMPS.</p>
<p>During postprocessing, the "interval" of each diagnostic is interpreted as a number of configurations to be read from file between subsequent calls of the sample method, rather than the number of MD or MC steps. Unless configurations were written to file more frequently than necessary, the interval for each diagnostics should thus generally be set to 1 in the parameter file for a postprocessing run.</p>
<p>Navigation: </p>
<ul style="list-style: none;">
<li>
<a class="el" href="user_examples_page.html">2.6 Examples</a> (Previous)  </li>
<li>
<a class="el" href="user_page.html">2 User Guide</a> (Up)  </li>
<li>
<a class="el" href="user_restart_page.html">2.8 Restarting</a> (Next)  </li>
</ul>
</div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 21 2013 23:05:17 for Simpatico by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
