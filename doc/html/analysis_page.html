<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Simpatico: Data Analysis</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simpatico&#160;<span id="projectnumber">v0.8</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">Simpatico - Simulation Package for Polymer and Molecular Liquids</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Data Analysis </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p>The mcSim and mdSim programs allow a user to evaluate and analyze a variety of physical properties either during a simulation, "on the fly", or after, by postprocessing of a sequence of system configurations that were save to file during a simulation. Both modes of operation use the same main programs, and both use same set of classes for data analysis. Postprocessing is invoked by a command in the command file that causes the main <a class="el" href="classMcMd_1_1McSimulation.html" title="A Monte-Carlo simulation of one McSystem.">McSimulation</a> or <a class="el" href="classMcMd_1_1McSimulation.html" title="A Monte-Carlo simulation of one McSystem.">McSimulation</a> to read in a sequence of configurations from file, thus replacing the loop over MC or MD steps in a simulation by an loop over input configurations.</p>
<p>The classes that are used for data analysis in mcSim and mdSim are subclasses of the <a class="el" href="classMcMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">McMd::Diagnostic</a> base class. A typical subclass of <a class="el" href="classMcMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">Diagnostic</a> evaluates one or more physical properties of interest, and either outputs a sequence of values to an associated file for later analysis or updates one or more statistical accumulators in order to accumulate, e.g., averages, autocorrelation functions, histograms etc. Source code for the diagnostic classes that are distributed with Simpatico can be found in the src/mcMd/diagnostics directory. Users may create new diagnostics by writing new subclasses.</p>
<h2><a class="anchor" id="analysis_onthefly_section"></a>
On-the-fly Analysis</h2>
<p>The choice of what analysis operations (if any) should be executed during a simulation is specified in the parameter file. Each <a class="el" href="classMcMd_1_1McSimulation.html" title="A Monte-Carlo simulation of one McSystem.">McSimulation</a> or <a class="el" href="classMcMd_1_1MdSimulation.html" title="A molecular dynamics simulation of a single MdSystem.">MdSimulation</a> has a <a class="el" href="classMcMd_1_1DiagnosticManager.html" title="Manager for a list of Diagnostic objects.">DiagnosticManager</a> object, which maintains an array of pointers to <a class="el" href="classMcMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">Diagnostic</a> objects. The set of diagnostics that will be used during a simulation is specified in the "DiagnosticManager" block of the parameter file. Each subblock in this block gives the subclass name and any parameters required by the diagnostic. As it encounters each such subblock, the <a class="el" href="classMcMd_1_1DiagnosticManager.html" title="Manager for a list of Diagnostic objects.">DiagnosticManager</a> creates an instance of the specified subclass (identified by the name in the first line of the subbblock), calls the readParam() method of this new object to initialize the new object, and adds a pointer to the new object to an array of pointers. Most diagnostics write data to an associated output file, either during the simulation or as a summery at the end of a simulation, and thus require an output file name as a parameter in the associated parameter file block. An unlimited number of diagnostics may be added to a simulation.</p>
<p>Every subclass of <a class="el" href="classMcMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">Diagnostic</a> must implement a sample() method that takes a step counter as an argument, and that is invoked periodically during a simulation, at some specified interval. The sample() method generally evaluates a physical property and either writes data to an associated file or updates a statistical accumulator, or both. The sample() method of each diagnostic is called only when the step counter is an integer multiple of the number of an integer "interval" parameter. The step counter represents the number of MD or MC steps in a simulation run, or the number of configurations read from file in a postprocessing run. The value of the "interval" parameter for each <a class="el" href="classMcMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">Diagnostic</a> is given within the associated parameter file block in the parameter file. The interval parameter may be different for different diagnostics, but the interval for each diagnostic must be a multiple of a a "baseInterval" parameter which is specified as the first line within the <a class="el" href="classMcMd_1_1DiagnosticManager.html" title="Manager for a list of Diagnostic objects.">DiagnosticManager</a> block of the parameter file.</p>
<h2><a class="anchor" id="analysis_configWrite_section"></a>
Dumping Configurations to File</h2>
<p><a class="el" href="classMcMd_1_1DumpConfig.html" title="Periodically dump system configuration to a new file.">DumpConfig</a> is a sublcass of <a class="el" href="classMcMd_1_1Diagnostic.html" title="Abstract base for periodic output and/or analysis actions.">Diagnostic</a> that is used to write system configuration files at regular intervals, for later post-processing. Each configuration contains (at a minimum) the atomic coordinates and the dimensions of the periodic simulation cell at a given instant. Any of several output file formats may be chosen by invoking a SET_CONFIG_IO command in the command file before the SIMULATE command, which runs a simulation. The name of each configuration file written by <a class="el" href="classMcMd_1_1DumpConfig.html" title="Periodically dump system configuration to a new file.">DumpConfig</a> is constructed by appending a sequential integer counter to a base file name. The base file name is specified in the <a class="el" href="classMcMd_1_1DumpConfig.html" title="Periodically dump system configuration to a new file.">DumpConfig</a> parameter file block.</p>
<h2><a class="anchor" id="analysis_postprocess_section"></a>
Postprocessing</h2>
<p>To postprocess a sequence of configuration dump files, one must run mcSim or mdSim program using a parameter file very similar to that used to initialize the original simulation, and a command script that contains an "ANALYZE_DUMPS" command, rather than a "SIMULATE" command. The ANALYZE_DUMPTS command causes the program to read in a sequence of configuration files and treat each configuration exactly as if they were generated during a simulation. The set of diagnostics that will be applied to a sequence of configurations during postprocessing is specified in the "DiagnosticManager" block of the parameter file, exactly as for diagnostics that are applied on-the-fly during a simulation. The same set of diagnostic subclasses are available for use in either mode.</p>
<p>The names of the input configuration files are constructed by concatenating the inputPrefix parameter of the <a class="el" href="classMcMd_1_1FileMaster.html" title="A FileMaster manages a set of input and output files.">FileMaster</a>, a base name that is specified as an argument to the ANALYZE_DUMPS command and an integer in a range that is specified in the ANALYZE command. For example, if the inputPrefix of the <a class="el" href="classMcMd_1_1FileMaster.html" title="A FileMaster manages a set of input and output files.">FileMaster</a> was set to out/ (because this was the output prefix used by a previous simulation), and the outputPrefix was set to analyze/, the command </p>
<div class="fragment"><pre class="fragment">   ANALYZE_DUMPS  0   19   dump/config
</pre></div><p> would cause the main <a class="el" href="classMcMd_1_1McSimulation.html" title="A Monte-Carlo simulation of one McSystem.">McSimulation</a> or <a class="el" href="classMcMd_1_1MdSimulation.html" title="A molecular dynamics simulation of a single MdSystem.">MdSimulation</a> object to read in and apply all of the specified diagnostics to configurations files with names out/config.0 out/config.1 ... in/config.19, and write the results of the analysis to files in the analyze/ directory.</p>
<p>The mdSim program may also be used postprocess an MD trajectory file. An MD trajectory file is a binary file that contains a sequence of configurations ("frames") within a single file. To analyze an MD trajectory file, simple use an ANALYZE_TRAJECTORY command in place of ANALYZE_DUMPS.</p>
<p>One practical difference between postprocessing and on-the-fly analysis is that, during postprocessing, the "interval" of each diagnostic is interpreted as a number of configurations to be read from file between subsequent calls of the sample method, rather than the number of MD or MC steps. Unless configurations were written to file more frequently than necessary, the interval for most diagnostics should thus be set to 1 during post processing, but intervals much greater than 1 are common during on-the-fly analysis.</p>
<ul>
<li>
<a class="el" href="examples_page.html">Examples</a> (Prev)  </li>
<li>
<a class="el" href="guide_page.html">User Guide</a> (Up)  </li>
<li>
<a class="el" href="restart_page.html">Restarting</a> (Next)  </li>
</ul>
</div></div>
<hr class="footer"/><address class="footer"><small>Generated on Sat Jun 16 2012 20:50:49 for Simpatico by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
