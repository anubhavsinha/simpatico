<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Simpatico: DdMd::GroupCollector&lt; N &gt; Class Template Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simpatico
   &#160;<span id="projectnumber">v1.10</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceDdMd.html">DdMd</a>      </li>
      <li class="navelem"><a class="el" href="classDdMd_1_1GroupCollector.html">GroupCollector</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">DdMd::GroupCollector&lt; N &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__DdMd__Communicate__Module.html">MPI Communication</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="DdMd::GroupCollector" --><!-- doxytag: inherits="Util::ParamComposite" --><hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;int N&gt;<br/>
class DdMd::GroupCollector&lt; N &gt;</h3>

<p>Class for collecting Groups from processors to master processor. </p>
<p>An <a class="el" href="classDdMd_1_1GroupCollector.html" title="Class for collecting Groups from processors to master processor.">GroupCollector</a> collects <a class="el" href="classDdMd_1_1Group.html" title="A group of covalently interacting atoms.">Group</a> objects from all processors to the master processor in order to output a configuration file.</p>
<p>Usage: </p>
<div class="fragment"><pre class="fragment">    GroupStorage&lt;N&gt; storage;
    Domain domain;
    Buffer buffer;
    <a class="code" href="classDdMd_1_1GroupCollector.html#a2e533a44ecd28fdd0483f0d05da155d7" title="Constructor.">GroupCollector</a> collector;

    <span class="comment">// Initialization</span>
    collector.associate(domain, storage, buffer);

    <span class="comment">// Communication</span>
    <span class="keywordflow">if</span> (domain.gridRank() == 0) {  <span class="comment">// if master processor</span>
       collector.allocate(100);
       collector.setup();
       Group&lt;N&gt;* groupPtr = collector.nextPtr();
       <span class="keywordflow">while</span> (groupPtr) {
          <span class="comment">// Write *groupPtr to file; </span>
          groupPtr = collector.nextPtr();
       }
    } <span class="keywordflow">else</span> { <span class="comment">// if not master</span>
       collector.send();
    }
</pre></div> 
<p>Definition at line <a class="el" href="GroupCollector_8h_source.html#l00060">60</a> of file <a class="el" href="GroupCollector_8h_source.html">GroupCollector.h</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="GroupCollector_8h_source.html">GroupCollector.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for DdMd::GroupCollector&lt; N &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classDdMd_1_1GroupCollector.png" usemap="#DdMd::GroupCollector&lt; N &gt;_map" alt=""/>
  <map id="DdMd::GroupCollector&lt; N &gt;_map" name="DdMd::GroupCollector&lt; N &gt;_map">
<area href="classUtil_1_1ParamComposite.html" title="An object that can read multiple parameters from file." alt="Util::ParamComposite" shape="rect" coords="90,112,261,136"/>
<area href="classUtil_1_1ParamComponent.html" title="Abstract base class for classes that input and ouput parameters to file." alt="Util::ParamComponent" shape="rect" coords="90,56,261,80"/>
<area href="classUtil_1_1Serializable.html" title="Abstract class for serializable objects." alt="Util::Serializable" shape="rect" coords="0,0,171,24"/>
<area href="classUtil_1_1MpiFileIo.html" title="Identifies whether this processor may do file I/O." alt="Util::MpiFileIo" shape="rect" coords="181,0,352,24"/>
</map>
 </div></div>

<p><a href="classDdMd_1_1GroupCollector-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDdMd_1_1GroupCollector.html#a2e533a44ecd28fdd0483f0d05da155d7">GroupCollector</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a2e533a44ecd28fdd0483f0d05da155d7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDdMd_1_1GroupCollector.html#ae99db35462f48b0d8534cc8afe3c479e">~GroupCollector</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#ae99db35462f48b0d8534cc8afe3c479e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDdMd_1_1GroupCollector.html#ab120de03adb6b6f7a293fe47660bf46a">associate</a> (<a class="el" href="classDdMd_1_1Domain.html">Domain</a> &amp;domain, <a class="el" href="classDdMd_1_1GroupStorage.html">GroupStorage</a>&lt; N &gt; &amp;storage, <a class="el" href="classDdMd_1_1Buffer.html">Buffer</a> &amp;buffer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize pointers to associated objects.  <a href="#ab120de03adb6b6f7a293fe47660bf46a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDdMd_1_1GroupCollector.html#a0e0e45cd10d2f88203037a1df1f66b86">setCapacity</a> (int recvArrayCapacity)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set size of cache for receiving groups on the master.  <a href="#a0e0e45cd10d2f88203037a1df1f66b86"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDdMd_1_1GroupCollector.html#a47ca243d3c65bfaa03dcd8ec5db2fb06">setup</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup master processor for receiving.  <a href="#a47ca243d3c65bfaa03dcd8ec5db2fb06"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDdMd_1_1Group.html">Group</a>&lt; N &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDdMd_1_1GroupCollector.html#a7300cc70bc0f36294edea8dd73f88f3d">nextPtr</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a pointer to the next available atom, or null.  <a href="#a7300cc70bc0f36294edea8dd73f88f3d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDdMd_1_1GroupCollector.html#a71255c8180f10e0a455ca9f108907de3">send</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send all groups on this processor to the master processor.  <a href="#a71255c8180f10e0a455ca9f108907de3"></a><br/></td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2e533a44ecd28fdd0483f0d05da155d7"></a><!-- doxytag: member="DdMd::GroupCollector::GroupCollector" ref="a2e533a44ecd28fdd0483f0d05da155d7" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int N&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDdMd_1_1GroupCollector.html">DdMd::GroupCollector</a>&lt; N &gt;::<a class="el" href="classDdMd_1_1GroupCollector.html">GroupCollector</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>

<p>Definition at line <a class="el" href="GroupCollector_8tpp_source.html#l00025">25</a> of file <a class="el" href="GroupCollector_8tpp_source.html">GroupCollector.tpp</a>.</p>

<p>References <a class="el" href="ParamComposite_8cpp_source.html#l00377">Util::ParamComposite::setClassName()</a>.</p>

</div>
</div>
<a class="anchor" id="ae99db35462f48b0d8534cc8afe3c479e"></a><!-- doxytag: member="DdMd::GroupCollector::~GroupCollector" ref="ae99db35462f48b0d8534cc8afe3c479e" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int N&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDdMd_1_1GroupCollector.html">DdMd::GroupCollector</a>&lt; N &gt;::~<a class="el" href="classDdMd_1_1GroupCollector.html">GroupCollector</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destructor. </p>

<p>Definition at line <a class="el" href="GroupCollector_8tpp_source.html#l00041">41</a> of file <a class="el" href="GroupCollector_8tpp_source.html">GroupCollector.tpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab120de03adb6b6f7a293fe47660bf46a"></a><!-- doxytag: member="DdMd::GroupCollector::associate" ref="ab120de03adb6b6f7a293fe47660bf46a" args="(Domain &amp;domain, GroupStorage&lt; N &gt; &amp;storage, Buffer &amp;buffer)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int N&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classDdMd_1_1GroupCollector.html">DdMd::GroupCollector</a>&lt; N &gt;::<a class="el" href="classDdMd_1_1GroupCollector.html#ab120de03adb6b6f7a293fe47660bf46a">associate</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDdMd_1_1Domain.html">Domain</a> &amp;&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDdMd_1_1GroupStorage.html">GroupStorage</a>&lt; N &gt; &amp;&#160;</td>
          <td class="paramname"><em>storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDdMd_1_1Buffer.html">Buffer</a> &amp;&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize pointers to associated objects. </p>
<p>Call on all processors, only once. </p>

<p>Definition at line <a class="el" href="GroupCollector_8tpp_source.html#l00048">48</a> of file <a class="el" href="GroupCollector_8tpp_source.html">GroupCollector.tpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0e0e45cd10d2f88203037a1df1f66b86"></a><!-- doxytag: member="DdMd::GroupCollector::setCapacity" ref="a0e0e45cd10d2f88203037a1df1f66b86" args="(int recvArrayCapacity)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int N&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classDdMd_1_1GroupCollector.html">DdMd::GroupCollector</a>&lt; N &gt;::<a class="el" href="classDdMd_1_1GroupCollector.html#a0e0e45cd10d2f88203037a1df1f66b86">setCapacity</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>recvArrayCapacity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set size of cache for receiving groups on the master. </p>
<p>The cache is actually allocated only on master processor, within the first call to the setup function. This function must be called once on the master. Calling it on other processors sets an unused variable, with no other effect, and thus does no harm.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">recvArrayCapacity</td><td>capacity of recvArray cache on master. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="GroupCollector_8tpp_source.html#l00060">60</a> of file <a class="el" href="GroupCollector_8tpp_source.html">GroupCollector.tpp</a>.</p>

<p>References <a class="el" href="global_8h_source.html#l00051">UTIL_THROW</a>.</p>

</div>
</div>
<a class="anchor" id="a47ca243d3c65bfaa03dcd8ec5db2fb06"></a><!-- doxytag: member="DdMd::GroupCollector::setup" ref="a47ca243d3c65bfaa03dcd8ec5db2fb06" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int N&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classDdMd_1_1GroupCollector.html">DdMd::GroupCollector</a>&lt; N &gt;::<a class="el" href="classDdMd_1_1GroupCollector.html#a47ca243d3c65bfaa03dcd8ec5db2fb06">setup</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup master processor for receiving. </p>
<p>Call only on the master processor, just before receive loop. </p>

<p>Definition at line <a class="el" href="GroupCollector_8tpp_source.html#l00075">75</a> of file <a class="el" href="GroupCollector_8tpp_source.html">GroupCollector.tpp</a>.</p>

<p>References <a class="el" href="global_8h_source.html#l00051">UTIL_THROW</a>.</p>

</div>
</div>
<a class="anchor" id="a7300cc70bc0f36294edea8dd73f88f3d"></a><!-- doxytag: member="DdMd::GroupCollector::nextPtr" ref="a7300cc70bc0f36294edea8dd73f88f3d" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int N&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDdMd_1_1Group.html">Group</a>&lt; N &gt; * <a class="el" href="classDdMd_1_1GroupCollector.html">DdMd::GroupCollector</a>&lt; N &gt;::<a class="el" href="classDdMd_1_1GroupCollector.html#a7300cc70bc0f36294edea8dd73f88f3d">nextPtr</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return a pointer to the next available atom, or null. </p>
<p>Call only on the master processor, within loop over groups. This function return the address of the next available <a class="el" href="classDdMd_1_1Group.html" title="A group of covalently interacting atoms.">Group</a>, or null if no more are available. Groups are returned in order of processor rank, starting with those on the master processor, then processor 1, etc.</p>
<p>The address returned is an address within an internal cache, which is then freed for reuse. All <a class="el" href="classDdMd_1_1Group.html" title="A group of covalently interacting atoms.">Group</a> data must thus be copied to a permanent location before calling <a class="el" href="classDdMd_1_1GroupCollector.html#a7300cc70bc0f36294edea8dd73f88f3d" title="Return a pointer to the next available atom, or null.">nextPtr()</a> again.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>address of next group, or null if no more are available. </dd></dl>

<p>Definition at line <a class="el" href="GroupCollector_8tpp_source.html#l00114">114</a> of file <a class="el" href="GroupCollector_8tpp_source.html">GroupCollector.tpp</a>.</p>

<p>References <a class="el" href="ddMd_2chemistry_2Group_8h_source.html#l00355">DdMd::Group&lt; N &gt;::atomPtr()</a>, <a class="el" href="ddMd_2chemistry_2Atom_8h_source.html#l00443">DdMd::Atom::isGhost()</a>, <a class="el" href="ddMd_2chemistry_2Group_8h_source.html#l00463">DdMd::Group&lt; N &gt;::unpack()</a>, and <a class="el" href="global_8h_source.html#l00051">UTIL_THROW</a>.</p>

</div>
</div>
<a class="anchor" id="a71255c8180f10e0a455ca9f108907de3"></a><!-- doxytag: member="DdMd::GroupCollector::send" ref="a71255c8180f10e0a455ca9f108907de3" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int N&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classDdMd_1_1GroupCollector.html">DdMd::GroupCollector</a>&lt; N &gt;::<a class="el" href="classDdMd_1_1GroupCollector.html#a71255c8180f10e0a455ca9f108907de3">send</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send all groups on this processor to the master processor. </p>
<p>Call on all processors except the master (rank = 0) processor. </p>

<p>Definition at line <a class="el" href="GroupCollector_8tpp_source.html#l00213">213</a> of file <a class="el" href="GroupCollector_8tpp_source.html">GroupCollector.tpp</a>.</p>

<p>References <a class="el" href="ddMd_2chemistry_2Atom_8h_source.html#l00443">DdMd::Atom::isGhost()</a>, and <a class="el" href="global_8h_source.html#l00051">UTIL_THROW</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="GroupCollector_8h_source.html">GroupCollector.h</a></li>
<li><a class="el" href="GroupCollector_8tpp_source.html">GroupCollector.tpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.3-->
<!-- start footer part -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 1 2014 21:58:14 for Simpatico by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
