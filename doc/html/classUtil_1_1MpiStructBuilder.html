<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Simpatico: MpiStructBuilder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simpatico&#160;<span id="projectnumber">v0.8</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceUtil.html">Util</a>      </li>
      <li class="navelem"><a class="el" href="classUtil_1_1MpiStructBuilder.html">MpiStructBuilder</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>MpiStructBuilder Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Util::MpiStructBuilder" --><hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="classUtil_1_1MpiStructBuilder.html" title="A MpiStructBuilder objects is used to create an MPI Struct datatype.">MpiStructBuilder</a> objects is used to create an MPI Struct datatype. </p>
<p>This class provides methods to simplify construction of an MPI data type that can stores instances of a C struct or C++ class.</p>
<p>As an example, consider the creation of an MPI datatype MyClassMpi for class MyClass, with a class definition: </p>
<div class="fragment"><pre class="fragment"> <span class="keyword">class </span>MyClass 
 {
    <span class="keywordtype">double</span> x[3];
    <span class="keywordtype">int</span>    i, j;
 }
</pre></div><p> The code required to build and commit the MPI datatype MyClassMpi is: </p>
<div class="fragment"><pre class="fragment">    MyClass          object;
    MPI::Datatype  MyClassMpi;
    <a class="code" href="classUtil_1_1MpiStructBuilder.html#a3314ef3e8b03208b2f8cb846e08a7f0c" title="Default constructor.">MpiStructBuilder</a> builder;

    builder.setBase(&amp;<span class="keywordtype">object</span>)
    builder.addMember(&amp;<span class="keywordtype">object</span>.x, MPI::DOUBLE, 3);
    builder.addMember(&amp;<span class="keywordtype">object</span>.i, MPI::INT, 1);
    builder.addMember(&amp;<span class="keywordtype">object</span>.j, MPI::INT, 1);
    builder.commit(&amp;MyClassMpi);
</pre></div><p> The setBase and addMember classes require addresses of an instance of the class and of its members, respectively. These addresses must all refer to same instance. The commit method calculates the offset of each member by subtracting the address of the object from the address of each of its members. </p>

<p>Definition at line <a class="el" href="MpiStructBuilder_8h_source.html#l00054">54</a> of file <a class="el" href="MpiStructBuilder_8h_source.html">MpiStructBuilder.h</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="MpiStructBuilder_8h_source.html">MpiStructBuilder.h</a>&gt;</code></p>

<p><a href="classUtil_1_1MpiStructBuilder-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUtil_1_1MpiStructBuilder.html#a3314ef3e8b03208b2f8cb846e08a7f0c">MpiStructBuilder</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#a3314ef3e8b03208b2f8cb846e08a7f0c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUtil_1_1MpiStructBuilder.html#a5882a267b18044ab1149b71aea7d6b6d">setBase</a> (void *objectAddress)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set address of an class instance.  <a href="#a5882a267b18044ab1149b71aea7d6b6d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUtil_1_1MpiStructBuilder.html#aa91ba3ec4fb3b4f5a469a400f0f5e16a">addMember</a> (void *memberAddress, MPI::Datatype type, int count=1)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new member variable to the type map.  <a href="#aa91ba3ec4fb3b4f5a469a400f0f5e16a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUtil_1_1MpiStructBuilder.html#a0f12d9ca5f37ab23eae4d2ae7abb4e8f">commit</a> (MPI::Datatype &amp;newType)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Build and commit a user-defined MPI Struct datatype.  <a href="#a0f12d9ca5f37ab23eae4d2ae7abb4e8f"></a><br/></td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3314ef3e8b03208b2f8cb846e08a7f0c"></a><!-- doxytag: member="Util::MpiStructBuilder::MpiStructBuilder" ref="a3314ef3e8b03208b2f8cb846e08a7f0c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">home david code simpatico src util mpi <a class="el" href="classUtil_1_1MpiStructBuilder.html">MpiStructBuilder</a> cpp <a class="el" href="classUtil_1_1MpiStructBuilder.html">MpiStructBuilder</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default constructor. </p>

<p>Definition at line <a class="el" href="MpiStructBuilder_8cpp_source.html#l00013">13</a> of file <a class="el" href="MpiStructBuilder_8cpp_source.html">MpiStructBuilder.cpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a5882a267b18044ab1149b71aea7d6b6d"></a><!-- doxytag: member="Util::MpiStructBuilder::setBase" ref="a5882a267b18044ab1149b71aea7d6b6d" args="(void *objectAddress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setBase </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>objectAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set address of an class instance. </p>

<p>Definition at line <a class="el" href="MpiStructBuilder_8cpp_source.html#l00021">21</a> of file <a class="el" href="MpiStructBuilder_8cpp_source.html">MpiStructBuilder.cpp</a>.</p>

<p>Referenced by <a class="el" href="Vector_8cpp_source.html#l00101">Vector::commitMpiType()</a>, <a class="el" href="Tensor_8cpp_source.html#l00114">Tensor::commitMpiType()</a>, <a class="el" href="SpeciesGroup_8tpp_source.html#l00062">SpeciesGroup&lt; NAtom &gt;::commitMpiType()</a>, <a class="el" href="SpeciesEnsemble_8cpp_source.html#l00101">SpeciesEnsemble::commitMpiType()</a>, <a class="el" href="PairSelector_8cpp_source.html#l00165">PairSelector::commitMpiType()</a>, <a class="el" href="Pair_8h_source.html#l00069">Pair&lt; Data &gt;::commitMpiType()</a>, <a class="el" href="IntVector_8cpp_source.html#l00096">IntVector::commitMpiType()</a>, <a class="el" href="FArray_8h_source.html#l00291">FArray&lt; Data, Capacity &gt;::commitMpiType()</a>, <a class="el" href="EnergyEnsemble_8cpp_source.html#l00104">EnergyEnsemble::commitMpiType()</a>, and <a class="el" href="BoundaryEnsemble_8cpp_source.html#l00103">BoundaryEnsemble::commitMpiType()</a>.</p>

</div>
</div>
<a class="anchor" id="aa91ba3ec4fb3b4f5a469a400f0f5e16a"></a><!-- doxytag: member="Util::MpiStructBuilder::addMember" ref="aa91ba3ec4fb3b4f5a469a400f0f5e16a" args="(void *memberAddress, MPI::Datatype type, int count=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addMember </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>memberAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI::Datatype&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a new member variable to the type map. </p>
<p>This method must be called once for each member. The address parameter must be a pointer to a member variable of the object whose base address is passed to <a class="el" href="classUtil_1_1MpiStructBuilder.html#a5882a267b18044ab1149b71aea7d6b6d" title="Set address of an class instance.">setBase()</a>.</p>
<p>The count parameter is required only for array members: the default value of count=1 may be used for scalar members.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">memberAddress</td><td>displacement of variable, in bytes. </td></tr>
    <tr><td class="paramname">type</td><td>data type (MPI::INT, MPI::DOUBLE, etc.) </td></tr>
    <tr><td class="paramname">count</td><td>number of contiguous variables (array count) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MpiStructBuilder_8cpp_source.html#l00029">29</a> of file <a class="el" href="MpiStructBuilder_8cpp_source.html">MpiStructBuilder.cpp</a>.</p>

<p>Referenced by <a class="el" href="Vector_8cpp_source.html#l00101">Vector::commitMpiType()</a>, <a class="el" href="Tensor_8cpp_source.html#l00114">Tensor::commitMpiType()</a>, <a class="el" href="SpeciesGroup_8tpp_source.html#l00062">SpeciesGroup&lt; NAtom &gt;::commitMpiType()</a>, <a class="el" href="SpeciesEnsemble_8cpp_source.html#l00101">SpeciesEnsemble::commitMpiType()</a>, <a class="el" href="PairSelector_8cpp_source.html#l00165">PairSelector::commitMpiType()</a>, <a class="el" href="Pair_8h_source.html#l00069">Pair&lt; Data &gt;::commitMpiType()</a>, <a class="el" href="IntVector_8cpp_source.html#l00096">IntVector::commitMpiType()</a>, <a class="el" href="FArray_8h_source.html#l00291">FArray&lt; Data, Capacity &gt;::commitMpiType()</a>, <a class="el" href="EnergyEnsemble_8cpp_source.html#l00104">EnergyEnsemble::commitMpiType()</a>, and <a class="el" href="BoundaryEnsemble_8cpp_source.html#l00103">BoundaryEnsemble::commitMpiType()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f12d9ca5f37ab23eae4d2ae7abb4e8f"></a><!-- doxytag: member="Util::MpiStructBuilder::commit" ref="a0f12d9ca5f37ab23eae4d2ae7abb4e8f" args="(MPI::Datatype &amp;newType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commit </td>
          <td>(</td>
          <td class="paramtype">MPI::Datatype &amp;&#160;</td>
          <td class="paramname"><em>newType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Build and commit a user-defined MPI Struct datatype. </p>
<p>The <a class="el" href="classUtil_1_1MpiStructBuilder.html#a5882a267b18044ab1149b71aea7d6b6d" title="Set address of an class instance.">setBase()</a> method must be called once and the <a class="el" href="classUtil_1_1MpiStructBuilder.html#aa91ba3ec4fb3b4f5a469a400f0f5e16a" title="Add a new member variable to the type map.">addMember()</a> method must be called once per member before calling this method.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">newType</td><td>new MPI datatype (on output). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MpiStructBuilder_8cpp_source.html#l00042">42</a> of file <a class="el" href="MpiStructBuilder_8cpp_source.html">MpiStructBuilder.cpp</a>.</p>

<p>Referenced by <a class="el" href="Vector_8cpp_source.html#l00101">Vector::commitMpiType()</a>, <a class="el" href="Tensor_8cpp_source.html#l00114">Tensor::commitMpiType()</a>, <a class="el" href="SpeciesGroup_8tpp_source.html#l00062">SpeciesGroup&lt; NAtom &gt;::commitMpiType()</a>, <a class="el" href="SpeciesEnsemble_8cpp_source.html#l00101">SpeciesEnsemble::commitMpiType()</a>, <a class="el" href="PairSelector_8cpp_source.html#l00165">PairSelector::commitMpiType()</a>, <a class="el" href="Pair_8h_source.html#l00069">Pair&lt; Data &gt;::commitMpiType()</a>, <a class="el" href="IntVector_8cpp_source.html#l00096">IntVector::commitMpiType()</a>, <a class="el" href="FArray_8h_source.html#l00291">FArray&lt; Data, Capacity &gt;::commitMpiType()</a>, <a class="el" href="EnergyEnsemble_8cpp_source.html#l00104">EnergyEnsemble::commitMpiType()</a>, and <a class="el" href="BoundaryEnsemble_8cpp_source.html#l00103">BoundaryEnsemble::commitMpiType()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="MpiStructBuilder_8h_source.html">MpiStructBuilder.h</a></li>
<li><a class="el" href="MpiStructBuilder_8cpp_source.html">MpiStructBuilder.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sat Jun 16 2012 20:50:57 for Simpatico by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
