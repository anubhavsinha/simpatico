<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Simpatico: MpiSendRecv.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simpatico&#160;<span id="projectnumber">v0.8</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_1f5833e5a6ae4f3b158cdaf1cc06a4a1.html">src</a>      </li>
      <li class="navelem"><a class="el" href="dir_1ac4cd60fc166a1e0eba5ea680be1316.html">util</a>      </li>
      <li class="navelem"><a class="el" href="dir_b0d0393c10d90299510dae2a295a093c.html">mpi</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>MpiSendRecv.h</h1>  </div>
</div>
<div class="contents">
<a href="MpiSendRecv_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifdef UTIL_MPI</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#ifndef MPI_SEND_RECV_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define MPI_SEND_RECV_H</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span>
<a name="l00005"></a>00005 <span class="comment">/*</span>
<a name="l00006"></a>00006 <span class="comment">* Simpatico - Simulation Package for Polymeric and Molecular Liquids</span>
<a name="l00007"></a>00007 <span class="comment">*</span>
<a name="l00008"></a>00008 <span class="comment">* Copyright 2010, David Morse (morse@cems.umn.edu)</span>
<a name="l00009"></a>00009 <span class="comment">* Distributed under the terms of the GNU General Public License.</span>
<a name="l00010"></a>00010 <span class="comment">*/</span>
<a name="l00011"></a>00011 
<a name="l00073"></a>00073 <span class="preprocessor">#include &lt;util/global.h&gt;</span>
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="preprocessor">#include &lt;util/mpi/MpiTraits.h&gt;</span>
<a name="l00076"></a>00076 <span class="preprocessor">#include &lt;util/containers/DArray.h&gt;</span>
<a name="l00077"></a>00077 <span class="preprocessor">#include &lt;util/containers/DMatrix.h&gt;</span>
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="keyword">namespace </span>Util
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081 
<a name="l00082"></a>00082    <span class="comment">// Scalar parameters</span>
<a name="l00083"></a>00083 
<a name="l00095"></a>00095    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00096"></a><a class="code" href="namespaceUtil.html#ab89acd97fcb3b5b862cf5d3d3411c701">00096</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#ab89acd97fcb3b5b862cf5d3d3411c701" title="Send a single T value.">send</a>(MPI::Comm&amp; comm, T&amp; data, <span class="keywordtype">int</span> dest, <span class="keywordtype">int</span> tag)
<a name="l00097"></a>00097    {
<a name="l00098"></a>00098       <span class="keywordflow">if</span> (!<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>)
<a name="l00099"></a>00099          <a class="code" href="global_8h.html#ad2512f8bd062d41d66799cf900151487" title="Macro for throwing an Exception, reporting function, file and line number.">UTIL_THROW</a>(<span class="stringliteral">&quot;No committed MPI type in send&lt;T&gt;&quot;</span>);
<a name="l00100"></a>00100       comm.Send(&amp;data, 1, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, dest, tag); 
<a name="l00101"></a>00101    }
<a name="l00102"></a>00102   
<a name="l00114"></a>00114    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00115"></a><a class="code" href="namespaceUtil.html#a246009a1146ff0da64e1134835b7236c">00115</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#a246009a1146ff0da64e1134835b7236c" title="Receive a single T value.">recv</a>(MPI::Comm&amp; comm, T&amp; data, <span class="keywordtype">int</span> source, <span class="keywordtype">int</span> tag)
<a name="l00116"></a>00116    {  
<a name="l00117"></a>00117       <span class="keywordflow">if</span> (!<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>)
<a name="l00118"></a>00118          <a class="code" href="global_8h.html#ad2512f8bd062d41d66799cf900151487" title="Macro for throwing an Exception, reporting function, file and line number.">UTIL_THROW</a>(<span class="stringliteral">&quot;No committed MPI type in recv&lt;T&gt;&quot;</span>);
<a name="l00119"></a>00119       comm.Recv(&amp;data, 1, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, source, tag); 
<a name="l00120"></a>00120    }
<a name="l00121"></a>00121   
<a name="l00132"></a>00132    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00133"></a><a class="code" href="namespaceUtil.html#ac573d482a8c23319a9a178d098084807">00133</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#ac573d482a8c23319a9a178d098084807" title="Broadcast a single T value.">bcast</a>(MPI::Intracomm&amp; comm, T&amp; data, <span class="keywordtype">int</span> root)
<a name="l00134"></a>00134    {  
<a name="l00135"></a>00135       <span class="keywordflow">if</span> (!<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>)
<a name="l00136"></a>00136          <a class="code" href="global_8h.html#ad2512f8bd062d41d66799cf900151487" title="Macro for throwing an Exception, reporting function, file and line number.">UTIL_THROW</a>(<span class="stringliteral">&quot;No committed MPI type in bcast&lt;T&gt;&quot;</span>);
<a name="l00137"></a>00137       comm.Bcast(&amp;data, 1, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, root); 
<a name="l00138"></a>00138    }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140    <span class="comment">// C Array partial specializations</span>
<a name="l00141"></a>00141 
<a name="l00154"></a>00154    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00155"></a><a class="code" href="namespaceUtil.html#ab260560a954c580c111bc43889c7b02d">00155</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#ab89acd97fcb3b5b862cf5d3d3411c701" title="Send a single T value.">send</a>(MPI::Comm&amp; comm, T* array, <span class="keywordtype">int</span> count, <span class="keywordtype">int</span> dest, <span class="keywordtype">int</span> tag)
<a name="l00156"></a>00156    {  
<a name="l00157"></a>00157       <span class="keywordflow">if</span> (<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>) {
<a name="l00158"></a>00158          comm.Send(array, count, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, dest, tag); 
<a name="l00159"></a>00159       } <span class="keywordflow">else</span> { 
<a name="l00160"></a>00160          <span class="comment">// Try send&lt;T&gt; by element, in case of explicit specialization.</span>
<a name="l00161"></a>00161          <span class="comment">// If there is no specialization or type, send&lt;T&gt; throws.</span>
<a name="l00162"></a>00162          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {
<a name="l00163"></a>00163             send&lt;T&gt;(comm, array[i], dest, tag); 
<a name="l00164"></a>00164          }
<a name="l00165"></a>00165       }
<a name="l00166"></a>00166    } 
<a name="l00167"></a>00167 
<a name="l00180"></a>00180    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00181"></a><a class="code" href="namespaceUtil.html#aa05fe96cc592fb8c8602dbc2de425330">00181</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#a246009a1146ff0da64e1134835b7236c" title="Receive a single T value.">recv</a>(MPI::Comm&amp; comm, T* array, <span class="keywordtype">int</span> count, <span class="keywordtype">int</span> source, <span class="keywordtype">int</span> tag)
<a name="l00182"></a>00182    {  
<a name="l00183"></a>00183       <span class="keywordflow">if</span> (<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>) {
<a name="l00184"></a>00184          comm.Recv(array, count, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, source, tag); 
<a name="l00185"></a>00185       } <span class="keywordflow">else</span> {
<a name="l00186"></a>00186          <span class="comment">// Try recv&lt;T&gt; by element, in case of explicit specialization.</span>
<a name="l00187"></a>00187          <span class="comment">// If there is no specialization or type, recv&lt;T&gt; throws.</span>
<a name="l00188"></a>00188          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {
<a name="l00189"></a>00189             recv&lt;T&gt;(comm, array[i], source, tag); 
<a name="l00190"></a>00190          }
<a name="l00191"></a>00191       }
<a name="l00192"></a>00192    }
<a name="l00193"></a>00193 
<a name="l00205"></a>00205    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00206"></a><a class="code" href="namespaceUtil.html#a17692180f6c210c0746958d9a336d02b">00206</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#ac573d482a8c23319a9a178d098084807" title="Broadcast a single T value.">bcast</a>(MPI::Intracomm&amp; comm, T* array, <span class="keywordtype">int</span> count, <span class="keywordtype">int</span> root)
<a name="l00207"></a>00207    {  
<a name="l00208"></a>00208       <span class="keywordflow">if</span> (<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>) {
<a name="l00209"></a>00209          comm.Bcast(array, count, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, root); 
<a name="l00210"></a>00210       } <span class="keywordflow">else</span> {
<a name="l00211"></a>00211          <span class="comment">// Try bcast&lt;T&gt; by element, in case of explicit specialization.</span>
<a name="l00212"></a>00212          <span class="comment">// If there is no specialization or type, bcast&lt;T&gt; throws.</span>
<a name="l00213"></a>00213          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {
<a name="l00214"></a>00214             bcast&lt;T&gt;(comm, array[i], root); 
<a name="l00215"></a>00215          }
<a name="l00216"></a>00216       }
<a name="l00217"></a>00217    }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219    <span class="comment">// DArray container partial specializations</span>
<a name="l00220"></a>00220 
<a name="l00233"></a>00233    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00234"></a><a class="code" href="namespaceUtil.html#ae65ddce2c36520f0ac57460badf9bcc3">00234</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#ab89acd97fcb3b5b862cf5d3d3411c701" title="Send a single T value.">send</a>(MPI::Comm&amp; comm, <a class="code" href="classUtil_1_1DArray.html" title="Dynamically allocatable Array class template.">DArray&lt;T&gt;</a>&amp; array, <span class="keywordtype">int</span> count, <span class="keywordtype">int</span> dest, <span class="keywordtype">int</span> tag)
<a name="l00235"></a>00235    {  
<a name="l00236"></a>00236       <span class="keywordflow">if</span> (<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>) {
<a name="l00237"></a>00237          comm.Send(&amp;array[0], count, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, dest, tag); 
<a name="l00238"></a>00238       } <span class="keywordflow">else</span> {
<a name="l00239"></a>00239          <span class="comment">// try send&lt;T&gt; by element, in case of explicit specialization.</span>
<a name="l00240"></a>00240          <span class="comment">// If there is no specialization or type, send&lt;T&gt; throws.</span>
<a name="l00241"></a>00241          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {
<a name="l00242"></a>00242             send&lt;T&gt;(comm, array[i], dest, tag); 
<a name="l00243"></a>00243          }
<a name="l00244"></a>00244       }
<a name="l00245"></a>00245    }
<a name="l00246"></a>00246   
<a name="l00259"></a>00259    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00260"></a><a class="code" href="namespaceUtil.html#a30ef436bd4d29ff49c212dc889679bac">00260</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#a246009a1146ff0da64e1134835b7236c" title="Receive a single T value.">recv</a>(MPI::Comm&amp; comm, <a class="code" href="classUtil_1_1DArray.html" title="Dynamically allocatable Array class template.">DArray&lt;T&gt;</a>&amp; array, <span class="keywordtype">int</span> count, <span class="keywordtype">int</span> source, <span class="keywordtype">int</span> tag)
<a name="l00261"></a>00261    {  
<a name="l00262"></a>00262       <span class="keywordflow">if</span> (<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>) {
<a name="l00263"></a>00263          comm.Recv(&amp;array[0], count, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, source, tag); 
<a name="l00264"></a>00264       } <span class="keywordflow">else</span> {
<a name="l00265"></a>00265          <span class="comment">// try recv&lt;T&gt; by element, in case of explicit specialization.</span>
<a name="l00266"></a>00266          <span class="comment">// If there is no specialization or type, recv&lt;T&gt; throws.</span>
<a name="l00267"></a>00267          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {
<a name="l00268"></a>00268             recv&lt;T&gt;(comm, array[i], source, tag); 
<a name="l00269"></a>00269          }
<a name="l00270"></a>00270       }
<a name="l00271"></a>00271    }
<a name="l00272"></a>00272   
<a name="l00284"></a>00284    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00285"></a><a class="code" href="namespaceUtil.html#a19eadc57aa344979a8f24aa2c0ab8d09">00285</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#ac573d482a8c23319a9a178d098084807" title="Broadcast a single T value.">bcast</a>(MPI::Intracomm&amp; comm, <a class="code" href="classUtil_1_1DArray.html" title="Dynamically allocatable Array class template.">DArray&lt;T&gt;</a>&amp; array, <span class="keywordtype">int</span> count, <span class="keywordtype">int</span> root)
<a name="l00286"></a>00286    {  
<a name="l00287"></a>00287       <span class="keywordflow">if</span> (<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>) {
<a name="l00288"></a>00288          comm.Bcast(&amp;array[0], count, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, root); 
<a name="l00289"></a>00289       } <span class="keywordflow">else</span> {
<a name="l00290"></a>00290          <span class="comment">// try bcast&lt;T&gt; by element, in case of explicit specialization.</span>
<a name="l00291"></a>00291          <span class="comment">// If there is no specialization or type, bcast&lt;T&gt; throws.</span>
<a name="l00292"></a>00292          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; ++i) {
<a name="l00293"></a>00293             bcast&lt;T&gt;(comm, array[i], root); 
<a name="l00294"></a>00294          }
<a name="l00295"></a>00295       }
<a name="l00296"></a>00296    }
<a name="l00297"></a>00297   
<a name="l00298"></a>00298    <span class="comment">// DMatrix container partial specializations</span>
<a name="l00299"></a>00299 
<a name="l00313"></a>00313    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00314"></a><a class="code" href="namespaceUtil.html#a00e79132f9b7f867396dcf038fb83c6c">00314</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#ab89acd97fcb3b5b862cf5d3d3411c701" title="Send a single T value.">send</a>(MPI::Comm&amp; comm, <a class="code" href="classUtil_1_1DMatrix.html" title="Dynamically allocated Matrix.">DMatrix&lt;T&gt;</a>&amp; matrix, <span class="keywordtype">int</span> m, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> dest, <span class="keywordtype">int</span> tag)
<a name="l00315"></a>00315    {  
<a name="l00316"></a>00316       <span class="keywordflow">if</span> (<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>) {
<a name="l00317"></a>00317          comm.Send(&amp;matrix(0, 0), m*n, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, dest, tag); 
<a name="l00318"></a>00318       } <span class="keywordflow">else</span> {
<a name="l00319"></a>00319          <span class="comment">// try send&lt;T&gt; by element, in case of explicit specialization.</span>
<a name="l00320"></a>00320          <span class="comment">// If there is no specialization or type, send&lt;T&gt; throws.</span>
<a name="l00321"></a>00321          <span class="keywordtype">int</span> i, j;
<a name="l00322"></a>00322          <span class="keywordflow">for</span> (i = 0; i &lt; m; ++i) {
<a name="l00323"></a>00323             <span class="keywordflow">for</span> (j = 0; j &lt; n; ++j) {
<a name="l00324"></a>00324                send&lt;T&gt;(comm, matrix(i, j), dest, tag); 
<a name="l00325"></a>00325             }
<a name="l00326"></a>00326          }
<a name="l00327"></a>00327       }
<a name="l00328"></a>00328    }
<a name="l00329"></a>00329   
<a name="l00343"></a>00343    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00344"></a><a class="code" href="namespaceUtil.html#ae6b19914f3345896f13885306218c4da">00344</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#a246009a1146ff0da64e1134835b7236c" title="Receive a single T value.">recv</a>(MPI::Comm&amp; comm, <a class="code" href="classUtil_1_1DMatrix.html" title="Dynamically allocated Matrix.">DMatrix&lt;T&gt;</a>&amp; matrix, <span class="keywordtype">int</span> m, <span class="keywordtype">int</span> n, 
<a name="l00345"></a>00345              <span class="keywordtype">int</span> source, <span class="keywordtype">int</span> tag)
<a name="l00346"></a>00346    {  
<a name="l00347"></a>00347       <span class="keywordflow">if</span> (<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>) {
<a name="l00348"></a>00348          comm.Recv(&amp;matrix(0, 0), m*n, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, source, tag); 
<a name="l00349"></a>00349       } <span class="keywordflow">else</span> {
<a name="l00350"></a>00350          <span class="comment">// try recv&lt;T&gt; by element, in case of explicit specialization.</span>
<a name="l00351"></a>00351          <span class="comment">// If there is no specialization or type, recv&lt;T&gt; throws.</span>
<a name="l00352"></a>00352          <span class="keywordtype">int</span> i, j;
<a name="l00353"></a>00353          <span class="keywordflow">for</span> (i = 0; i &lt; m; ++i) {
<a name="l00354"></a>00354             <span class="keywordflow">for</span> (j = 0; j &lt; n; ++j) {
<a name="l00355"></a>00355                recv&lt;T&gt;(comm, matrix(i, j), source, tag); 
<a name="l00356"></a>00356             }
<a name="l00357"></a>00357          }
<a name="l00358"></a>00358       }
<a name="l00359"></a>00359    }
<a name="l00360"></a>00360   
<a name="l00373"></a>00373    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00374"></a><a class="code" href="namespaceUtil.html#a74759338b38193517119a6406bc1dbf5">00374</a>    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#ac573d482a8c23319a9a178d098084807" title="Broadcast a single T value.">bcast</a>(MPI::Intracomm&amp; comm, <a class="code" href="classUtil_1_1DMatrix.html" title="Dynamically allocated Matrix.">DMatrix&lt;T&gt;</a>&amp; matrix, <span class="keywordtype">int</span> m, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> root)
<a name="l00375"></a>00375    {  
<a name="l00376"></a>00376       <span class="keywordflow">if</span> (<a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::hasType</a>) {
<a name="l00377"></a>00377          comm.Bcast(&amp;matrix(0, 0), m*n, <a class="code" href="classUtil_1_1MpiTraits.html" title="Default MpiTraits class.">MpiTraits&lt;T&gt;::type</a>, root); 
<a name="l00378"></a>00378       } <span class="keywordflow">else</span> {
<a name="l00379"></a>00379          <span class="comment">// try bcast&lt;T&gt; by element, in case of explicit specialization.</span>
<a name="l00380"></a>00380          <span class="comment">// If there is no specialization or type, bcast&lt;T&gt; throws.</span>
<a name="l00381"></a>00381          <span class="keywordtype">int</span> i, j;
<a name="l00382"></a>00382          <span class="keywordflow">for</span> (i = 0; i &lt; m; ++i) {
<a name="l00383"></a>00383             <span class="keywordflow">for</span> (j = 0; j &lt; n; ++j) {
<a name="l00384"></a>00384                bcast&lt;T&gt;(comm, matrix(i, j), root); 
<a name="l00385"></a>00385             }
<a name="l00386"></a>00386          }
<a name="l00387"></a>00387       }
<a name="l00388"></a>00388    }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390    <span class="comment">// bool (explicit specializations)</span>
<a name="l00391"></a>00391 
<a name="l00395"></a>00395    <span class="keyword">template</span> &lt;&gt;
<a name="l00396"></a>00396    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#a1983144ca1dc47f073bcb33c958a97c0" title="Explicit specialization of send for bool data.">send&lt;bool&gt;</a>(MPI::Comm&amp; comm, <span class="keywordtype">bool</span>&amp; data, <span class="keywordtype">int</span> dest, <span class="keywordtype">int</span> tag);
<a name="l00397"></a>00397 
<a name="l00401"></a>00401    <span class="keyword">template</span> &lt;&gt;
<a name="l00402"></a>00402    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#aa152b537a6b48497bc846066fe093126" title="Explicit specialization of recv for bool data.">recv&lt;bool&gt;</a>(MPI::Comm&amp; comm, <span class="keywordtype">bool</span>&amp; data, <span class="keywordtype">int</span> source, <span class="keywordtype">int</span> tag);
<a name="l00403"></a>00403 
<a name="l00407"></a>00407    <span class="keyword">template</span> &lt;&gt;
<a name="l00408"></a>00408    <span class="keywordtype">void</span> <a class="code" href="namespaceUtil.html#aaa82edc8c52cbadcdef1424fe5f19bde" title="Explicit specialization of bcast for bool data.">bcast&lt;bool&gt;</a>(MPI::Intracomm&amp; comm, <span class="keywordtype">bool</span>&amp; data, <span class="keywordtype">int</span> root);
<a name="l00409"></a>00409 
<a name="l00410"></a>00410    <span class="comment">// std::string (explicit specializations)</span>
<a name="l00411"></a>00411  
<a name="l00415"></a>00415    <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> 
<a name="l00416"></a>00416    send&lt;std::string&gt;(MPI::Comm&amp; comm, std::string&amp; data, <span class="keywordtype">int</span> dest, <span class="keywordtype">int</span> tag);
<a name="l00417"></a>00417 
<a name="l00421"></a>00421    <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> 
<a name="l00422"></a>00422    recv&lt;std::string&gt;(MPI::Comm&amp; comm, std::string&amp; data, <span class="keywordtype">int</span> source, <span class="keywordtype">int</span> tag);
<a name="l00423"></a>00423 
<a name="l00427"></a>00427    <span class="keyword">template</span> &lt;&gt;
<a name="l00428"></a>00428    <span class="keywordtype">void</span> bcast&lt;std::string&gt;(MPI::Intracomm&amp; comm, std::string&amp; data, <span class="keywordtype">int</span> root);
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 }
<a name="l00431"></a>00431 <span class="preprocessor">#endif</span>
<a name="l00432"></a>00432 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sat Jun 16 2012 20:50:48 for Simpatico by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
