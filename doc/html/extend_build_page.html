<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Simpatico: 5.2 Build system (adding new classes)</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simpatico
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">Simpatico - Simulation Package for Polymer and Molecular Liquids</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">5.2 Build system (adding new classes) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Simpatico is built using a system of unix makefiles. The procedure described here allows users to add new classes to the list of source files maintained by the build system, so that new classes can be compiled and linked along with the rest of simpatico.</p>
<p>Source and header files for user-defined classes should be placed in one of three special user/ directories that are provided for this purpose. Any new class that is a subclass of an existing base class should be defined within the same C++ namespace as the base class. Source (*.cpp) and header (*.h) files for classes that are defined in the <a class="el" href="namespaceMcMd.html" title="Classes for Monte Carlo (MC) and molecular dynamics (MC) simulation.">McMd</a> namespace, which can be used in the mcSim and mdSim programs, should be placed in the src/mcMd/user/ directory. Source and header files for new classes defined in the <a class="el" href="namespaceDdMd.html" title="Parallel domain decomposition (DD) molecular dynamics MD simulation.">DdMd</a> namespace, which will accessible only by ddSim, should be placed in the src/ddMd/user/ directory. Files for classes that define new interaction potential functions should be placed the directory src/inter/user, as discussed in more detail <a class="el" href="extend_potential_page.html">here</a>.</p>
<p>After placing new C++ files in the appropriate user/ directory, the user must also modify a file named "sources.mk" in the same directory. The "sources.mk" file in any subdirectory of src/ is a makefile fragment that contains a list of all of the source files in that directory. The source.mk file in user/ directory initially contains an empty list of such files. For example, the file src/mcMd/user/ initially looks like this: </p>
<div class="fragment"><pre class="fragment">mcMd_user_SRCS=\
<span class="preprocessor">    #$(SRC_DIR)/mcMd/user/Class1.cpp \</span>
<span class="preprocessor">    #$(SRC_DIR)/mcMd/user/Class2.cpp</span>
<span class="preprocessor"></span>
mcMd_user_OBJS=$(mcMd_user_SRCS:.cpp=.o)
</pre></div><p> Here, mcMd_user_SRCS is a makefile variable that lists all of the *.cpp source files in this directory. In any such file, this name of this variable is constructed by appending the suffix "_SRCS" to a mangled form of the directory path, expressed relative to the src/ directory. The corresponding _OBJS variable (mcMd_user_OBJS in this example) gives a list of all of the object (*.o) files that will be created by compiling all of the source files. Each name in the list of object files is created automatically by simply replacing the *.cpp file extension a source file name by a *.o extension. For the build system to work correctly, all source files must have a file extension *.cpp.</p>
<p>In the above example, the entries Class1.cpp and Class2.cpp are placeholders that are commented out by the '#' symbol at the beginning of each line. To add a new class to this initially empty list, uncomment the last of these lines, by removing the `#', and replace the placeholder "Class2.cpp" by the name of the new source file. The backslash at the end of each line is a line continuation symbol, which should appear at the end of every uncommented line of the definition of the _SRCS variable except the last line. The path to each source file must be given using the same format as that of the placeholder examples. In this format, the makefile variable  is used to represent the absolute path of the simpatico/src/ directory, and the path relative to the src/ directory is given explicitly. Only *.cpp files should be add to this list, and not the corresponding header file. Header-only classes do not need to be compiled separately or linked, and thus should not be added to the build system.</p>
<p>To compile all of the *.cpp files in a user/ directory, without re-compiling any other files, simply type </p>
<div class="fragment"><pre class="fragment">  &gt; make all
</pre></div><p> from within that directory. This command may be used to compile a new class while it is being written and debugged.</p>
<p>After the new source file is added to the appropriate _SRCS variable, it will automatically be compiled and linked into an executable when the relevant program or programs are compiled.</p>
<p>Navigation: </p>
<ul style="list-style: none;">
<li>
<a class="el" href="extend_base_page.html">5.1 Base Classes</a> (Previous)  </li>
<li>
<a class="el" href="extend_page.html">5 Extending Simpatico</a> (Up)  </li>
<li>
<a class="el" href="extend_factory_page.html">5.3 Factory Classes</a> (Next)  </li>
</ul>
</div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 21 2013 23:05:16 for Simpatico by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
